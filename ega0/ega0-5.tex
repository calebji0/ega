\section{Quasi-coherent and coherent sheaves}
\label{section:0.5}

\subsection{Quasi-coherent sheaves}
\label{subsection:0.5.1}

\begin{env}[5.1.1]
\label{0.5.1.1}
Let $(X,\sh{O}_X)$ be a ringed space, $\sh{F}$ an $\sh{O}_X$-module.
The data of a homomorphism $u:\sh{O}_X\to\sh{F}$ of $\sh{O}_X$-modules is equivalent to that of the section $s=u(1)\in\Gamma(X,\sh{F})$.
Indeed, when $s$ is given, for each section $t\in\Gamma(U,\sh{O}_X)$, we necessarily have $u(t)=t\cdot(s|U)$;
we say that $u$ is \emph{defined by the section $s$}.
If now $I$ is any set of indices, consider the direct sum sheaf $\sh{O}_X^{(I)}$, and for each $i\in I$, let $h_i$ be the canonical injection of the $i$-th factor into $\sh{O}_X^{(I)}$;
we know that $u\mapsto(u\circ h_i)$ is an isomorphism from $\Hom_{\sh{O}_X}(\sh{O}_X^{(I)},\sh{F})$ to the product $(\Hom_{\sh{O}_X}(\sh{O}_X,\sh{F}))^I$.
So there is a canonical one-to-one correspondence between the homomorphisms $u:\sh{O}_X^{(I)}\to\sh{F}$ and the \emph{families of sections $(s_i)_{i\in I}$ of $\sh{F}$ over $X$}.
The homomorphism $u$ corresponding to $(s_i)$ sends an element $(a_i)\in(\Gamma(U,\sh{O}_X))^{(I)}$ to $\sum_{i\in I}a_i\cdot(s_i|U)$.

We say that $\sh{F}$ is \emph{generated by the family $(s_i)$} if the homomorphism $\sh{O}_X^{(I)}\to\sh{F}$ defined
\oldpage[0\textsubscript{I}]{45}
for each family is \emph{surjective} (in other words, if, for each $x\in X$, $\sh{F}_x$ is an $\sh{O}_x$-module generated by the $(s_i)_x$).
We say that $\sh{F}$ is \emph{generated by its sections over $X$} if it is generated by the family of all these sections (or by a subfamily), in other words, if there exists a surjective homomorphism $\sh{O}_X^{(I)}\to\sh{F}$ for a suitable $I$.

We note that a $\sh{O}_X$-module $\sh{F}$ can be such that there exists a point $x_0\in X$ for which $\sh{F}|U$ is not generated by its sections over $U$, \emph{regardless of the choice of neighborhood $U$ of $x_0$}:
it suffices to take $X=\bb{R}$, for $\sh{O}_X$ the simple sheaf $\bb{Z}$, for $\sh{F}$ the algebraic subsheaf of $\sh{O}_X$ such that $\sh{F}_0=\{0\}$, $\sh{F}_x=\bb{Z}$ for $x\neq 0$, and finally $x_0=0$:
the only section of $\sh{F}|U$ over $U$ is $0$ for a neighborhood $U$ of $0$.
\end{env}

\begin{env}[5.1.2]
\label{0.5.1.2}
Let $f:X\to Y$ be a morphism of ringed spaces.
If $\sh{F}$ is a $\sh{O}_X$-module generated by its sections over $X$, then the canonical homomorphism $f^*(f_*(\sh{F}))\to\sh{F}$ (4.4.3.3) is \emph{surjective};
indeed, with the notation of \sref{0.5.1.1}, $s_i\otimes 1$ is a section of $f^*(f_*(\sh{F}))$ over $X$, and its image in $\sh{F}$ is $s_i$.
The example in \sref{0.5.1.1} where $f$ is the identity shows that the inverse of this proposition is false in general.

\erratum[II]{If $\sh{G}$ is an $\sh{O}_Y$-module generated by its sections over $Y$, then $f^*(\sh{G})$ is generated by its sections over $X$, since $f^*$ is a right exact functor.}
\end{env}

\begin{env}[5.1.3]
\label{0.5.1.3}
We say that an $\sh{O}_X$-module $\sh{F}$ is \emph{quasi-coherent} if for each $x\in X$ there is an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is isomorphic to the \emph{cokernel} of a homomorphism of the form $\sh{O}_X^{(I)}|U\to\sh{O}_X^{(J)}|U$, where $I$ and $J$ are sets of arbitrary indices.
It is clear that $\sh{O}_X$ is itself a quasi-coherent $\sh{O}_X$-module, and that any direct sum of quasi-coherent $\sh{O}_X$-modules is again a quasi-coherent $\sh{O}_X$-module.
We say that an \emph{$\sh{O}_X$-algebra $\sh{A}$} is \emph{quasi-coherent} if it is quasi-coherent as an $\sh{O}_X$-module.
\end{env}

\begin{env}[5.1.4]
\label{0.5.1.4}
Let $f:X\to Y$ be a morphism of ringed spaces.
If $\sh{G}$ is a quasi-coherent $\sh{O}_Y$-module, then $f^*(\sh{G})$ is a quasi-coherent $\sh{O}_X$-module.
Indeed, for each $x\in X$, there is an open neighborhood $V$ of $f(x)$ in $Y$ such that $\sh{G}|V$ is the cokernel of a homomorphism $\sh{O}_Y^{(I)}|V\to\sh{O}_Y^{(J)}|V$.
If $U=f^{-1}(V)$, and if $f_U$ is the restriction of $f$ to $U$, then we have $f^*(\sh{G})|U=f_U^*(\sh{G}|V)$;
as $f_U^*$ is right exact and commutes with direct sums, $f_U^*(\sh{G}|V)$ is the cokernel of a homomorphism $\sh{O}_X^{(I)}|U\to\sh{O}_X^{(J)}|U$.
\end{env}

\subsection{Sheaves of finite type}
\label{subsection:0.5.2}

\begin{env}[5.2.1]
\label{0.5.2.1}
We say that an $\sh{O}_X$-module $\sh{F}$ is \emph{of finite type} if for each $x\in X$ there exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is generated by a \emph{finite} family of sections over $U$, or if it is isomorphic to a sheaf quotient of a sheaf of the form $(\sh{O}_X|U)^p$ where $p$ is finite.
Each sheaf quotient of a sheaf of finite type is again a sheaf of finite type, as well as each finite direct sum and each finite tensor product of sheaves of finite type.
An $\sh{O}_X$-module of finite type is not necessarily quasi-coherent, as we can see for the $\sh{O}_X$-module $\sh{O}_X/\sh{F}$, where $\sh{F}$ is the example in \sref{0.5.1.1}.
If $\sh{F}$ is of finite type, then $\sh{F}_x$ is a $\sh{O}_x$-module of finite type for each $x\in X$, but the example in \sref{0.5.1.1} shows that this condition is necessary but not sufficient in general.
\end{env}

\begin{env}[5.2.2]
\label{0.5.2.2}
Let $\sh{F}$ be an $\sh{O}_X$-module \emph{of finite type}.
If $s_i$ ($1\leq i\leq n$) are the sections of $\sh{F}$ over an open neighborhood $U$ of a point $x\in X$ and the $(s_i)_x$ generate $\sh{F}_x$, then there exists an open neighborhood $V\subset U$ of $x$ such that the $(s_i)_y$ generate $\sh{F}_y$ for all $y\in Y$ (FAC, I, 2, 12, prop.~1).
In particular, we conclude that the support of $\sh{F}$ is \emph{closed}.

\oldpage[0\textsubscript{I}]{46}
Similarly, if $u:\sh{F}\to\sh{G}$ is a homomorphism such that $u_x=0$, then there exists a neighborhood $U$ of $x$ such that $u_y=0$ for all $y\in U$.
\end{env}

\begin{env}[5.2.3]
\label{0.5.2.3}
Suppose that $X$ is \emph{quasi-compact}, and let $\sh{F}$ and $\sh{G}$ be two $\sh{O}_X$-modules such that $\sh{G}$ is \emph{of finite type}, $u:\sh{F}\to\sh{G}$ a \emph{surjective} homomorphism.
In addition, suppose that $\sh{F}$ is the inductive limit of an inductive system $(\sh{F}_\lambda)$ of $\sh{O}_X$-modules.
Then there exists an index $\mu$ such that the homomorphism $\sh{F}_\mu\to\sh{G}$ is \emph{surjective}.
Indeed, for each $x\in X$, there exists a finite system of sections $s_i$ of $\sh{G}$ over an open neighborhood $U(x)$ of $x$ such that the $(s_i)_y$ generate $\sh{G}_y$ for all $y\in U(x)$;
there is then an open neighborhood $V(x)\subset U(x)$ of $x$ and $n$ sections $t_i$ of $\sh{F}$ over $V(x)$ such that $s_i|V(s)=u(t_i)$ for all $i$;
we can also suppose that the $t_i$ are the canonical images of sections of a similar sheaf $\sh{F}_{\lambda(x)}$ over $V(x)$.
We then cover $X$ with a finite number of neighborhoods $V(x_k)$, and let $\mu$ be the maximal index of the $\lambda(x_k)$;
it is clear that this index gives the answer.

Suppose still that $X$ is quasi-compact, and let $\sh{F}$ be an $\sh{O}_X$-module of finite type generated by its sections over $X$ \sref{0.5.1.1};
then $\sh{F}$ is generated by a \emph{finite} subfamily of these sections:
indeed, it suffices to cover $X$ by a finite number of open neighborhoods $U_k$ such that, for each $k$, there is a finite number of sections $s_{ik}$ of $\sh{F}$ over $X$ whose restrictions to $U_k$ generate $\sh{F}|U_k$;
it is clear that the $s_{ik}$ then generate $\sh{F}$.
\end{env}

\begin{env}[5.2.4]
\label{0.5.2.4}
Let $f:X\to Y$ be a morphism of ringed spaces.
If $\sh{G}$ is an $\sh{O}_Y$-module of finite type, then $f^*(\sh{G})$ is an $\sh{O}_X$-module of finite type.
Indeed, for each $x\in X$, there is an open neighborhood $V$ of $f(x)$ in $Y$ and a surjective homomorphism $v:\sh{O}_Y^p|V\to\sh{G}|V$.
If $U=f^{-1}(V)$ and if $f_U$ is the restriction of $f$ to $U$, then we have $f^*(\sh{G})|U=f_U^*(\sh{G}|V)$;
since \erratum[II]{$f_U^*$} is right exact \sref{0.4.3.1} and commutes with direct sums \sref{0.4.3.2}, $f_U^*(v)$ is a surjective homomorphism $\sh{O}_X^p|U\to f^*(\sh{G})|U$.
\end{env}

\begin{env}[5.2.5]
\label{0.5.2.5}
We say that an $\sh{O}_X$-module $\sh{F}$ \emph{admits a finite presentation} if for each $x\in X$ there exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is isomorphic to a \emph{cokernel of a $(\sh{O}_X|U)$-homomorphism $\sh{O}_X^p|U\to\sh{O}_X^q|U$}, $p$ and $q$ being two integers $>0$.
Such an $\sh{O}_X$-module is therefore of finite type and quasi-coherent.
If $f:X\to Y$ is a morphism of ringed spaces, and if $\sh{G}$ is an $\sh{O}_Y$-module admitting a finite presentation, then $f^*(\sh{G})$ admits a finite presentation, as shown in the argument of \sref{0.5.1.4}.
\end{env}

\begin{env}[5.2.6]
\label{0.5.2.6}
Let $\sh{F}$ be an $\sh{O}_X$-module admitting a finite presentation \sref{0.5.2.5};
then, for each $\sh{O}_X$-module $\sh{H}$, the canonical functorial homomorphism
\[
  (\shHom_{\sh{O}_X}(\sh{F},\sh{H}))_x\to\Hom_{\sh{O}_x}(\sh{F}_x,\sh{H}_x)
\]
is \emph{bijective}~(T,~4.1.1).
\end{env}

\begin{env}[5.2.7]
\label{0.5.2.7}
Let $\sh{F}$ and $\sh{G}$ be two $\sh{O}_X$-modules admitting a finite presentation.
If for some $x\in X$, $\sh{F}_x$ and $\sh{G}_x$ are \emph{isomorphic} as $\sh{O}_x$-modules, then there exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ and $\sh{G}|U$ are \emph{isomorphic}.
Indeed, if $\vphi:\sh{F}_x\to\sh{G}_x$ and $\psi:\sh{G}_x\to\sh{F}_x$ are an isomorphism and its inverse isomorphism, then there exists, according to \sref{0.5.2.6}, an open neighborhood $V$ of $x$ and a section $u$ (resp. $v$) of $\shHom_{\sh{O}_X}(\sh{F},\sh{G})$ (resp. $\shHom_{\sh{O}_X}(\sh{G},\sh{F})$) over $V$ such
\oldpage[0\textsubscript{I}]{47}
that $u_x=\vphi$ (resp. $v_x=\psi$).
As $(u\circ v)_x$ and $(v\circ u)_x$ are the identity automorphisms, there exists an open neighborhood $U\subset V$ of $x$ such that $(u\circ v)|U$ and $(v\circ u)|U$ are the identity automorphisms, hence the proposition.
\end{env}

\subsection{Coherent sheaves}
\label{subsection:0.5.3}

\begin{env}[5.3.1]
\label{0.5.3.1}
We say that an $\sh{O}_X$-module $\sh{F}$ is \emph{coherent} if it satisfies the two following conditions:
\begin{enumerate}
  \item[(a)] $\sh{F}$ is of finite type.
  \item[(b)] for each open $U\subset X$, integer $n>0$, and homomorphism $u:\sh{O}_X^n|U\to\sh{F}|U$, the kernel of $u$ is of finite type.
\end{enumerate}
We note that these two conditions are of a \emph{local} nature.

For most of the proofs of the properties of coherent sheaves in what follows, cf.~(FAC, I, 2).
\end{env}

\begin{env}[5.3.2]
\label{0.5.3.2}
Each coherent $\sh{O}_X$-module admits a finite presentation \sref{0.5.2.5};
the inverse is not necessarily true, since $\sh{O}_X$ itself is not necessarily a coherent $\sh{O}_X$-module.

Each $\sh{O}_X$-submodule \emph{of finite type} of a coherent $\sh{O}_X$-module is coherent;
each \emph{finite} direct sum of coherent $\sh{O}_X$-modules is a coherent $\sh{O}_X$-module.
\end{env}

\begin{env}[5.3.3]
\label{0.5.3.3}
If $0\to\sh{F}\to\sh{G}\to\sh{H}\to 0$ is an exact sequence of $\sh{O}_X$-modules and if two of these $\sh{O}_X$-modules are coherent, then so is the third.
\end{env}

\begin{env}[5.3.4]
\label{0.5.3.4}
If $\sh{F}$ and $\sh{G}$ are two coherent $\sh{O}_X$-modules, $u:\sh{F}\to\sh{G}$ a homomorphism, then $\Im(u)$, $\Ker(u)$, and $\Coker(u)$ are coherent $\sh{O}_X$-modules.
In particular, if $\sh{F}$ and $\sh{G}$ are $\sh{O}_X$-submodules of a coherent $\sh{O}_X$-module, then $\sh{F}+\sh{G}$ and $\sh{F}\cap\sh{G}$ are coherent.

\erratum[II]{If $\sh{A}\to\sh{B}\to\sh{C}\to\sh{D}\to\sh{E}$ is an exact sequence of $\sh{O}_X$-modules, and if $\sh{A}$, $\sh{B}$, $\sh{D}$, $\sh{E}$ are coherent, then $\sh{C}$ is coherent.}
\end{env}

\begin{env}[5.3.5]
\label{0.5.3.5}
If $\sh{F}$ and $\sh{G}$ are two coherent $\sh{O}_X$-modules, then so are $\sh{F}\otimes_{\sh{O}_X}\sh{G}$ are $\shHom_{\sh{O}_X}(\sh{F},\sh{G})$.
\end{env}

\begin{env}[5.3.6]
\label{0.5.3.6}
Let $\sh{F}$ be a coherent $\sh{O}_X$-module, $\sh{J}$ a coherent sheaf of ideals of $\sh{O}_X$.
Then the $\sh{O}_X$-module $\sh{J}\sh{F}$ is coherent, as the image of $\sh{J}\otimes_{\sh{O}_X}\sh{F}$ under the canonical homomorphism $\sh{J}\otimes_{\sh{O}_X}\sh{F}\to\sh{F}$ (\sref{0.5.3.4} and \sref{0.5.3.5}).
\end{env}

\begin{env}[5.3.7]
\label{0.5.3.7}
We say that an $\sh{O}_X$-algebra $\sh{A}$ is \emph{coherent} if it is coherent as an $\sh{O}_X$-module.
In particular, $\sh{O}_X$ is a \emph{coherent sheaf of rings} if and only if for each open $U\subset X$ and each homomorphism of the form $u:\sh{O}_X^p|U\to\sh{O}_X|U$, the kernel of $u$ is an $(\sh{O}_X|U)$-module of finite type.

If $\sh{O}_X$ is a coherent sheaf of rings, then each $\sh{O}_X$-module $\sh{F}$ admitting a finite presentation \sref{0.5.2.5} is coherent, according to \sref{0.5.3.4}.

The \emph{annihilator} of an $\sh{O}_X$-module $\sh{F}$ is the kernel $\sh{J}$ of the canonical homomorphism $\sh{O}_X\to\shHom_{\sh{O}_X}(\sh{F},\sh{F})$ which sends each section $s\in\Gamma(U,\sh{O}_X)$ to the multiplication by $s$ map in $\Hom(\sh{F}|U,\sh{F}|U)$;
if $\sh{O}_X$ is coherent and if $\sh{F}$ is a coherent $\sh{O}_X$-module, then $\sh{J}$ is coherent (\sref{0.5.3.4} and \sref{0.5.3.5}) and for each $x\in X$, $\sh{J}_x$ is the annihilator of $\sh{F}_x$ \sref{0.5.2.6}.
\end{env}

\begin{env}[5.3.8]
\label{0.5.3.8}
\oldpage[0\textsubscript{I}]{48}
Suppose that $\sh{O}_X$ is coherent;
let $\sh{F}$ be a coherent $\sh{O}_X$-module, $x$ a point of $X$, $M$ a submodule of finite type of $\sh{F}_x$;
then there exists an open neighborhood $U$ of $x$ and a coherent $(\sh{O}_X|U)$-submodule $\sh{G}$ of $\sh{F}|U$ such that $\sh{G}_x=M$ (T, 4.1, Lemma~1).

This result, along with the properties of the $\sh{O}_X$-submodules of a coherent $\sh{O}_X$-module, impose the necessary conditions on the rings $\sh{O}_x$ such that $\sh{O}_X$ is coherent.
For example \sref{0.5.3.4}, the intersection of two ideals of finite type of $\sh{O}_x$ must still be an ideal of finite type.
\end{env}

\begin{env}[5.3.9]
\label{0.5.3.9}
Suppose that $\sh{O}_X$ is coherent, and let $M$ be an $\sh{O}_x$-module admitting a finite presentation, therefore isomorphic to a cokernel of a homomorphism $\vphi:\sh{O}_x^p\to\sh{O}_x^q$;
then there exists an open neighborhood $U$ of $X$ and a coherent $(\sh{O}_X|U)$-module $\sh{F}$ such that $\sh{F}_x$ is isomorphic to $M$.
Indeed, according to \sref{0.5.2.6}, there exists a section $u$ of $\shHom_{\sh{O}_X}(\sh{O}_X^p,\sh{O}_X^q)$ over an open neighborhood $U$ of $x$ such that $u_x=\vphi$;
the cokernel $\sh{F}$ of the homomorphism $u:\sh{O}_X^p|U\to\sh{O}_X^q|U$ gives the answer \sref{0.5.3.4}.
\end{env}

\begin{env}[5.3.10]
\label{0.5.3.10}
Suppose that $\sh{O}_X$ is coherent, and let $\sh{J}$ be a coherent sheaf of ideals of $\sh{O}_X$.
For a $(\sh{O}_X/\sh{J})$-module $\sh{F}$ to be coherent, it is necessary and sufficient for it to be coherent as a $\sh{O}_X$-module.
In particular, $\sh{O}_X/\sh{J}$ is a coherent sheaf of rings.
\end{env}

\begin{env}[5.3.11]
\label{0.5.3.11}
Let $f:X\to Y$ be a morphism of ringed spaces, and suppose that $\sh{O}_X$ is coherent;
then, for each coherent $\sh{O}_Y$-module $\sh{G}$, $f^*(\sh{G})$ is a coherent $\sh{O}_X$-module.
Indeed, with the notation of \sref{0.5.2.4}, we can assume that $\sh{G}|V$ is the cokernel of a homomorphism $v:\sh{O}_Y^q|V\to\sh{O}_Y^p|V$;
as $f_U^*$ is right exact, $f^*(\sh{G})|U=f_U^*(\sh{G}|V)$ is the cokernel of the homomorphism $f_U^*(v):\sh{O}_X^q|U\to\sh{O}_X^p|U$, hence our assertion.
\end{env}

\begin{env}[5.3.12]
\label{0.5.3.12}
Let $Y$ be a closed subset of $X$, $j:Y\to X$ the canonical injection, $\sh{O}_Y$ a sheaf of rings on $Y$, and set $\sh{O}_X=j_*(\sh{O}_Y)$.
For a $\sh{O}_Y$-module $\sh{G}$ to be of finite type (resp. quasi-coherent, coherent), it is necessary and sufficient for $j_*(\sh{G})$ to be an $\sh{O}_X$-module of finite type (resp. quasi-coherent, coherent).
\end{env}

\subsection{Locally free sheaves}
\label{subsection:0.5.4}

\begin{env}[5.4.1]
\label{0.5.4.1}
Let $X$ be a ringed space.
We say that an $\sh{O}_X$-module $\sh{F}$ is \emph{locally free} if for each $x\in X$ there exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is isomorphic to a $(\sh{O}_X|U)$-module of the form $\sh{O}_X^{(I)}|U$, where $I$ can depend on $U$.
If for each $U$, $I$ is finite, then we say that $\sh{F}$ is \emph{of finite rank};
if for each $U$, $I$ has the same finite number of elements $n$, we say that $\sh{F}$ is \emph{of rank $n$}.
A locally free $\sh{O}_X$-module of rank $1$ is called \emph{invertible} (cf.~\sref{0.5.4.3}).
If $\sh{F}$ is a locally free $\sh{O}_X$-module of finite rank, then for each $x\in X$, $\sh{F}_x$ is a free $\sh{O}_x$-module of finite rank $n(x)$, and there exists a neighborhood $U$ of $x$ such that $\sh{F}|U$, is of rank $n(x)$;
if $X$ is connected, then $n(x)$ is \emph{constant}.

It is clear that each locally free sheaf is quasi-coherent, and if $\sh{O}_X$ is a coherent sheaf of rings, then each locally free $\sh{O}_X$-module of finite rank is coherent.

If $\sh{L}$ is locally free, then $\sh{L}\otimes_{\sh{O}_X}\sh{F}$ is an \emph{exact} functor in $\sh{F}$ to the category of $\sh{O}_X$-modules.

We will mostly consider locally free $\sh{O}_X$-modules of finite rank,
\oldpage[0\textsubscript{I}]{49}
and when we speak of locally free sheaves without specifying, it will be understood that they are of \emph{finite rank}.

\erratum[II]{Suppose that $\sh{O}_X$ is \emph{coherent}, and let $\sh{F}$ be a \emph{coherent} $\sh{O}_X$-module. Then, if at a point $x\in X$, $\sh{F}_x$ is an $\sh{O}_x$-module \emph{free of rank $n$}, there exists a neighborhood $U$ of $x$ such that $\sh{F}|U$ is \emph{locally free of rank $n$}; in fact, $\sh{F}_x$ is then isomorphic to $\sh{O}_x^n$, and the proposition follows from \sref{0.5.2.7}.}
\end{env}

\begin{env}[5.4.2]
\label{0.5.4.2}
If $\sh{L}$, $\sh{F}$ are two $\sh{O}_X$-modules, we have a canonical functorial homomorphism
\[
  \dual{\sh{L}}\otimes_{\sh{O}_X}\sh{F}=\shHom_{\sh{O}_X}(\sh{L},\sh{O}_X)\otimes_{\sh{O}_X}\sh{F}\to\shHom_{\sh{O}_X}(\sh{L},\sh{F})
  \tag{5.4.2.1}
\]
defined in the following way:
for each open set $U$, send any pair $(u,t)$, where $u\in\Gamma(U,\shHom_{\sh{O}_X}(\sh{L},\sh{O}_X))=\Hom(\sh{L}|U,\sh{O}_X|U)$ and $t\in\Gamma(U,\sh{F})$, to the element of $\Hom(\sh{L}|U,\sh{F}|U)$ which, for each $x\in U$, sends $s_x\in\sh{L}_x$ to the element $u_x(s_x)t_x$ of $\sh{F}_x$.
If $\sh{L}$ is \emph{locally free of finite rank}, then this homomorphism is \emph{bijective};
the property being local, we can in fact reduce to the case where $\sh{L}=\sh{O}_X^n$;
as for each $\sh{O}_X$-module $\sh{G}$, $\shHom_{\sh{O}_X}(\sh{O}_X^n,\sh{G})$ is canonically isomorphic to $\sh{G}^n$, we have reduced to the case $\sh{L}=\sh{O}_X$, which is immediate.
\end{env}

\begin{env}[5.4.3]
\label{0.5.4.3}
If $\sh{L}$ is invertible, then so is its dual $\dual{\sh{L}}=\shHom_{\sh{O}_X}(\sh{L},\sh{O}_X)$, since we can immediately reduce (as the question is local) to the case $\sh{L}=\sh{O}_X$.
In addition, we have a canonical isomorphism
\[
  \shHom_{\sh{O}_X}(\sh{L},\sh{O}_X)\otimes_{\sh{O}_X}\sh{L}\isoto\sh{O}_X
  \tag{5.4.3.1}
\]
as, according to \sref{0.5.3.2}, it suffices to define a canonical isomorphism $\shHom_{\sh{O}_X}(\sh{L},\sh{L})\isoto\sh{O}_X$.
For \emph{each} $\sh{O}_X$-module $\sh{F}$, we have a canonical homomorphism $\sh{O}_X\isoto\shHom_{\sh{O}_X}(\sh{F},\sh{F})$ \sref{0.5.3.7}.
It remains to prove that if $\sh{F}=\sh{L}$ is invertible, then this homomorphism is bijective, and as the question is local, it reduces to the case $\sh{L}=\sh{O}_X$, which is immediate.

Due to the above, we put $\sh{L}^{-1}=\shHom_{\sh{O}_X}(\sh{L},\sh{O}_X)$, and we say that $\sh{L}^{-1}$ is the \emph{inverse} of $\sh{L}$.
The terminology ``invertible sheaf'' can be justified in the following way when $X$ is a point and $\sh{O}_X$ is a \emph{local} ring $A$ with maximal ideal $\mathfrak{m}$;
if $M$ and $M'$ are two $A$-modules ($M$ being of finite type) such that $M\otimes_A M'$ is isomorphic to $A$, then as $(A/\mathfrak{m})\otimes_A(M\otimes_A M')$ identifies with $(M/\mathfrak{m}M)\otimes_{A/\mathfrak{m}}(M'/\mathfrak{m}M')$, this latter tensor product of vector spaces over the field $A/\mathfrak{m}$ is isomorphic to $A/\mathfrak{m}$, which requires $M/\mathfrak{m}M$ and $M'/\mathfrak{m}M'$ to be of dimension $1$.
For each element $z\in M$ not in $\mathfrak{m}M$, we have $M=Az+\mathfrak{m}M$, which implies that $M=Az$ according to Nakayama's Lemma, $M$ being of finite type.
Moreover, as the annihilator of $z$ kills $M\otimes_A M'$, which is isomorphic to $A$, this annihilator is $\{0\}$, and as a result $M$ is \emph{isomorphic to $A$}.
In the general case, this shows that $\sh{L}$ is an $\sh{O}_X$-module of finite type, such that there exists an $\sh{O}_X$-module $\sh{F}$ for which $\sh{L}\otimes_{\sh{O}_X}\sh{F}$ is isomorphic to $\sh{O}_X$, and if in addition the rings $\sh{O}_x$ are local rings, then $\sh{L}_x$ is an $\sh{O}_x$-module isomorphic to $\sh{O}_x$ for each $x\in X$.
If $\sh{O}_X$ and $\sh{L}$ are assumed to be \emph{coherent}, then we conclude that $\sh{L}$ is invertible according to \sref{0.5.2.7}.
\end{env}

\begin{env}[5.4.4]
\label{0.5.4.4}
If $\sh{L}$ and $\sh{L}'$ are two invertible $\sh{O}_X$-modules, then so is $\sh{L}\otimes_{\sh{O}_X}\sh{L}'$, since the question is local, we can assume that $\sh{L}=\sh{O}_X$, and the result is then trivial.
For each integer $n\geq 1$, we denote by $\sh{L}^{\otimes n}$ the tensor product of $n$ copies of the sheaf
\oldpage[0\textsubscript{I}]{50}
$\sh{L}$; we set by convention $\sh{L}^{\otimes 0}=\sh{O}_X$, and for $n\geq 1$, $\sh{L}^{\otimes(-n)}=(\sh{L}^{-1})^{\otimes n}$.
With these notation, there is then a \emph{canonical functorial isomorphism}
\[
  \sh{L}^{\otimes m}\otimes_{\sh{O}_X}\sh{L}^{\otimes n}\isoto\sh{L}^{\otimes(n+m)}
  \tag{5.4.4.1}
\]
for any rational integers $m$ and $n$:
indeed, by definition, we immediately reduce to the case where $m=-1$, $n=1$, and the isomorphism in question is then that defined in \sref{0.5.4.3}.
\end{env}

\begin{env}[5.4.5]
\label{0.5.4.5}
Let $f:Y\to X$ be a morphism of ringed spaces.
If $\sh{L}$ is a locally free (resp. invertible) $\sh{O}_X$-module, then $f^*(\sh{L})$ is a locally free (resp. invertible) $\sh{O}_Y$-module:
this follows immediately from that the inverse images of two locally isomorphic $\sh{O}_X$-modules are locally isomorphic, that $f^*$ commutes with finite direct sums, and that $f^*(\sh{O}_X)=\sh{O}_Y$ \sref{0.4.3.4}.
In addition, we know that we have a canonical functorial homomorphism $f^*(\dual{\sh{L}})\to\dual{(f^*(\sh{L}))}$ \sref{0.4.4.6}, and when $\sh{L}$ is locally free, this homomorphism is \emph{bijective}:
indeed, we again reduce to the case where $\sh{L}=\sh{O}_X$ which is trivial.
We conclude that if $\sh{L}$ is invertible, then $f^*(\sh{L}^{\otimes n})$ canonically identifies with $(f^*(\sh{L}))^{\otimes n}$ for each rational integer $n$.
\end{env}

\begin{env}[5.4.6]
\label{0.5.4.6}
Let $\sh{L}$ be an invertible $\sh{O}_X$-module; we denote by $\Gamma_\bullet(X,\sh{L})$ or simply $\Gamma_\bullet(\sh{L})$ the abelian group direct sum $\bigoplus_{n\in\bb{Z}}\Gamma(X,\sh{L}^{\otimes n})$;
we equip it with the structure of a \emph{graded ring}, by corresponding to a pair $(s_n,s_m)$, where $s_n\in\Gamma(X,\sh{L}^{\otimes n})$, $s_m\in\Gamma(X,\sh{L}^{\otimes m})$, the section of $\sh{L}^{\otimes(n+m)}$ over $X$ which corresponds canonically (5.4.4.1) to the section $s_n\otimes s_m$ of $\sh{L}^{\otimes n}\otimes_{\sh{O}_X}\sh{L}^{\otimes m}$;
the associativity of this multiplication is verified in an immediate way.
It is clear that $\Gamma_\bullet(X,\sh{L})$ is a covariant functor in $\sh{L}$, with values in the category of graded rings.

If now $\sh{F}$ is any $\sh{O}_X$-module, then we set
\[
  \Gamma_\bullet(\sh{L},\sh{F})=\bigoplus_{n\in\bb{Z}}\Gamma(X,\sh{F}\otimes_{\sh{O}_X}\sh{L}^{\otimes n}).
\]
We equip this abelian group with the structure of a \emph{graded module} over the graded ring $\Gamma_\bullet(\sh{L})$ in the following way:
to a pair $(s_n,u_m)$, where $s_n\in\Gamma(X,\sh{L}^{\otimes n})$ and $u_m\in\Gamma(X,\sh{F}\otimes_{\sh{O}_X}\sh{L}^{\otimes m})$, we associate the section of $\sh{F}\otimes_{\sh{O}_X}\sh{L}^{\otimes(m+n)}$ which canonically corresponds (5.4.4.1) to $s_n\otimes u_m$;
the verification of the module axioms are immediate.
For $X$ and $\sh{L}$ fixed, $\Gamma_\bullet(\sh{L},\sh{F})$ is a covariant functor in $\sh{F}$ with values in the category of graded $\Gamma_\bullet(\sh{L})$-modules;
for $X$ and $\sh{F}$ fixed, it is a covariant functor in $\sh{L}$ with values in the category of abelian groups.

If $f:Y\to X$ is a morphism of ringed spaces, the canonical homomorphism (4.4.3.2) $\rho:\sh{L}^{\otimes n}\to f_*(f^*(\sh{L}^{\otimes n}))$ defines a homomorphism of abelian groups $\Gamma(X,\sh{L}^{\otimes n})\to\Gamma(Y,f^*(\sh{L}^{\otimes n}))$, and as $f^*(\sh{L}^{\otimes n})=(f^*(\sh{L}))^{\otimes n})$, it follows from the definitions of the canonical homomorphisms (4.4.3.2) and (5.4.4.1) that the above homomorphisms define a \emph{functorial homomorphism of graded rings $\Gamma_\bullet(\sh{L})\to\Gamma_\bullet(f^*(\sh{L}))$}.
The same canonical homomorphism \sref{0.4.4.3} similarly defines a homomorphism of abelian groups $\Gamma(X,\sh{F}\otimes_{\sh{O}_X}\sh{L}^{\otimes n})\to\Gamma(Y,f^*(\sh{F}\otimes_{\sh{O}_X}\sh{L}^{\otimes n}))$, and as
\[
  f^*(\sh{F}\otimes_{\sh{O}_X}\sh{L}^{\otimes n})=f^*(\sh{F})\otimes_{\sh{O}_Y}(f^*(\sh{L}))^{\otimes n}
  \quad(4.3.3.1),
\]
\oldpage[0\textsubscript{I}]{51}
these homomorphism (for $n$ variable) define a \emph{di-homomorphism of graded modules $\Gamma_\bullet(\sh{L},\sh{F})\to\Gamma_\bullet(f^*(\sh{L}),f^*(\sh{F}))$}.
\end{env}

\begin{env}[5.4.7]
\label{0.5.4.7}
One can show that there exists a \emph{set} $\mathfrak{M}$ (also denoted $\mathfrak{M}(X)$) of invertible $\sh{O}_X$-modules such that each invertible $\sh{O}_X$-module is isomorphic to a unique element of $\mathfrak{M}$
\footnote{See the book in preparation cited in the introduction.};
we define on $\mathfrak{M}$ a composition law by sending two elements $\sh{L}$ and $\sh{L}'$ of $\mathfrak{M}$ to the unique element of $\mathfrak{M}$ isomorphic to $\sh{L}\otimes_{\sh{O}_X}\sh{L}'$.
With this composition law, \emph{$\mathfrak{M}$ is a group isomorphic to the cohomology group $\HH^1(X,\sh{O}_X^*)$}, where $\sh{O}_X^*$ is the subsheaf of $\sh{O}_X$ such that $\Gamma(U,\sh{O}_X^*)$ is the group of invertible elements of the ring $\Gamma(U,\sh{O}_X)$ for each open $U\subset X$ ($\sh{O}_X^*$ is therefore a sheaf of \emph{multiplicative} abelian groups).

We will note that for all open $U\subset X$, the group of sections $\Gamma(U,\sh{O}_X^*)$ canonically identifies with the \emph{automorphism group} of the $(\sh{O}_X|U)$-module $\sh{O}_X|U$, the identification sending a section $\varepsilon$ of $\sh{O}_X^*$ over $U$ to the automorphism $u$ of $\sh{O}_X|U$ such that $u_x(s_x)=\varepsilon_x s_x$ for all $x\in X$ and all $s_x\in\sh{O}_x$.
Then let $\mathfrak{U}=(U_\lambda)$ be an open cover of $X$; the data, for each pair of indices $(\lambda,\mu)$, of an automorphism $\theta_{\lambda\mu}$ of $\sh{O}_X|(U_\lambda\cap U_\mu)$ is the same as giving a \emph{$1$-cochain} of the cover $\mathfrak{U}$, with values in $\sh{O}_X^*$, and say that the $\theta_{\lambda\mu}$ satisfy the gluing condition \sref{0.3.3.1}, meaning that the corresponding cochain is a \emph{cocycle}.
Similarly, the data, for each $\lambda$, of an automorphism $\omega_\lambda$ of $\sh{O}_X|U_\lambda$ is the same as the data of a $0$-cochain of the cover $\mathfrak{U}$, with values in $\sh{O}_X^*$, and its \emph{coboundary} corresponds to the family of automorphisms $(\omega_\lambda|U_\lambda\cap U_\mu)\circ(\omega_\mu|U_\lambda\cap U_\mu)^{-1}$.
We can send each $1$-cocycle of $\mathfrak{U}$ with values in $\sh{O}_X^*$ to the element of $\mathfrak{M}$ isomorphic to an invertible $\sh{O}_X$-module obtained by gluing with respect to the family of automorphisms $(\theta_{\lambda\mu})$ corresponding to this cocycle, and to two cohomologous coycles correspond two equal elements of $\mathfrak{M}$ \sref{0.3.3.2};
in other words, we thus define a map $\vphi_\mathfrak{U}:\HH^1(\mathfrak{U},\sh{O}_X^*)\to\mathfrak{M}$.
In addition, if $\mathfrak{B}$ is a second open cover of $X$, finer than $\mathfrak{U}$, then the diagram
\[
  \xymatrix{
    \HH^1(\mathfrak{U},\sh{O}_X^*)\ar[rd]^{\vphi_\mathfrak{U}}\ar[dd]\\
    & \mathfrak{M}\\
    \HH^1(\mathfrak{B},\sh{O}_X^*)\ar[ur]_{\vphi_\mathfrak{B}}
  }
\]
where the vertical arrow is the canonical homomorphism (G, II, 5.7), is commutative, as a result of \sref{0.3.3.3}.
By passing to the inductive limit, we therefore obtain a map $\HH^1(X,\sh{O}_X^*)\to\mathfrak{M}$, the \v Cech cohomology group $\CHH^1(X,\sh{O}_X^*)$ identifying as we know with the first cohomology group $\HH^1(X,\sh{O}_X^*)$ (G, II, 5.9, Cor. of Thm.~5.9.1).
This map is \emph{surjective}: indeed, by definition, for each invertible $\sh{O}_X$-module $\sh{L}$, there is an open cover $(U_\lambda)$ of $X$ such that $\sh{L}$ is obtained by gluing the sheaves $\sh{O}_X|U_\lambda$ \sref{0.3.3.1}.
It is also \emph{injective}, since it suffices to prove for the maps $\HH^1(\mathfrak{U},\sh{O}_X)\to\mathfrak{M}$, and this follows from \sref{0.3.3.2}.
It remains to show that
\oldpage[0\textsubscript{I}]{52}
the bijection thus defined is a group homomorphism.
Given two invertible $\sh{O}_X$-modules $\sh{L}$ and $\sh{L}'$, there is an open cover $(U_\lambda)$ such that $\sh{L}|U_\lambda$ and $\sh{L}'|U_\lambda$ are isomorphic to $\sh{O}_X|U_\lambda$ for each $\lambda$;
so there is for each index $\lambda$ an element $a_\lambda$ (resp. $a_\lambda'$) of $\Gamma(U_\lambda,\sh{L})$ (resp. $\Gamma(U_\lambda,\sh{L}')$) such that the elements of $\Gamma(U_\lambda,\sh{L})$ (resp. $\Gamma(U_\lambda,\sh{L}')$) are the $s_\lambda\cdot a_\lambda$ (resp. $s_\lambda\cdot a_\lambda'$), where $s_\lambda$ varies over $\Gamma(U_\lambda,\sh{O}_X)$.
The corresponding cocycles $(\varepsilon_{\lambda\mu})$, $(\varepsilon_{\lambda\mu}')$ are such that $s_\lambda\cdot a_\lambda=s_\mu\cdot a_\mu$ (resp. $s_\lambda\cdot a_\lambda'=s_\mu\cdot a_\mu'$) over $U_\lambda\cap U_\mu$ is equivalent to $s_\lambda=\varepsilon_{\lambda\mu}s_\mu$ (resp. $s_\lambda=\varepsilon_{\lambda\mu}' s_\mu$) over $U_\lambda\cap U_\mu$.
As the sections of $\sh{L}\otimes_{\sh{O}_X}\sh{L}'$ over $U_\lambda$ are the finite sums of the $s_\lambda s_\lambda'\cdot(a_\lambda\otimes a_\lambda')$ where $s_\lambda$ and $s_\lambda'$ vary over $\Gamma(U_\lambda,\sh{O}_X)$, it is clear that the cocycle $(\varepsilon_{\lambda\mu},\varepsilon_{\lambda\mu}')$ corresponds to $\sh{L}\otimes_{\sh{O}_X}\sh{L}'$, which finishes the proof.
\footnote{For a general form of this result, see the book cited in the note on p.~51.}
\end{env}

\begin{env}[5.4.8]
\label{0.5.4.8}
Let $f=(\psi,\omega)$ be a morphism $Y\to X$ of ringed spaces.
The functor $f^*(\sh{L})$ to the category of free $\sh{O}_X$-modules defines a map (which we still denote $f^*$ by abuse of language) from the set $\mathfrak{M}(X)$ to the set $\mathfrak{M}(Y)$.
Second, we have a canonical homomorphism (T, 3.2.2)
\[
  \HH^1(X,\sh{O}_X^*)\to\HH^1(Y,\sh{O}_Y^*).
  \tag{5.4.8.1}
\]
When we canonically identify \sref{0.5.4.7} $\mathfrak{M}(X)$ and $\HH^1(X,\sh{O}_X^*)$ (resp. $\mathfrak{M}(Y)$ and $\HH^1(Y,\sh{O}_Y^*)$), the homomorphism (5.4.8.1) \emph{identifies with the map $f^*$}.
Indeed, if $\sh{L}$ comes from a cocycle $(\varepsilon_{\lambda\mu})$ corresponding to an open cover $(U_\lambda)$ of $X$, then it suffices to show that $f^*(\sh{L})$ comes from a cocycle whose cohomology class is the image under (5.4.8.1) of $(\varepsilon_{\lambda\mu})$.
If $\theta_{\lambda\mu}$ is the automorphism of $\sh{O}_X|(U_\lambda\cap U_\mu)$ which corresponds to $\varepsilon_{\lambda\mu}$, then it is clear that $f^*(\sh{L})$ is obtained by gluing the $\sh{O}_Y|\psi^{-1}(U_\lambda)$ by means of the automorphisms $f^*(\theta_{\lambda\mu})$, and it then suffices to check that these latter automorphisms corresponds to the cocycle $(\omega^\sharp(\varepsilon_{\lambda\mu}))$, which follows immediately from the definitions (we can identify $\varepsilon_{\lambda\mu}$ with its canonical image under $\rho$ \sref{0.3.7.2}, a section of $\psi^*(\sh{O}_X^*)$ over $\psi^{-1}(U_\lambda\cap U_\mu)$).
\end{env}

\begin{env}[5.4.9]
\label{0.5.4.9}
Let $\sh{E}$ and $\sh{F}$ be two $\sh{O}_X$-modules, $\sh{F}$ assumed to be \emph{locally free}, and let $\sh{G}$ be an \emph{$\sh{O}_X$-module extension of $\sh{F}$ by $\sh{E}$}, in other words there exists an exact sequence $0\to\sh{E}\xrightarrow{i}\sh{G}\xrightarrow{p}\sh{F}\to 0$.
Then, for each $x\in X$, there exists an open neighborhood $U$ of $x$ such that $\sh{G}|U$ is isomorphic to the \emph{direct sum $\sh{E}|U\oplus\sh{F}|U$}.
We can reduce to the case where $\sh{F}=\sh{O}_X^n$; let $e_i$ ($1\leq i\leq n$) be the canonical sections \sref{0.5.5.5} of $\sh{O}_X^n$; there then exists an open neighborhood $U$ of $x$ and $n$ sections $s_i$ of $\sh{G}$ over $U$ such that $p(s_i|U)=e_i|U$ for $1\leq i\leq n$.
That being so, let $f$ be the homomorphism $\sh{F}|U\to\sh{G}|U$ defined by the sections $s_i|U$ \sref{0.5.1.1}.
It is immediate that for each open $V\subset U$, and each section $s\in\Gamma(V,\sh{G})$ we have $s-f(p(s))\in\Gamma(V,\sh{E})$, hence our assertion.
\end{env}

\begin{env}[5.4.10]
\label{0.5.4.10}
Let $f:X\to Y$ be a morphism of ringed spaces, $\sh{F}$ an $\sh{O}_X$-module, and $\sh{L}$ a locally free $\sh{O}_Y$-module of finite rank.
Then there exists a canonical isomorphism
\[
  f_*(\sh{F})\otimes_{\sh{O}_Y}\sh{L}\isoto f_*(\sh{F}\otimes_{\sh{O}_X}f^*(\sh{L})).
  \tag{5.4.10.1}
\]

\oldpage[0\textsubscript{I}]{53}
Indeed, for each $\sh{O}_Y$-module $\sh{L}$, we have a canonical homomorphism
\[
  f_*(\sh{F})\otimes_{\sh{O}_Y}\sh{L}\xrightarrow{1\otimes\rho}f_*(\sh{F})\otimes_{\sh{O}_Y}f_*(f^*(\sh{L}))\xrightarrow{\alpha}f_*(\sh{F}\otimes_{\sh{O}_X}f^*(\sh{L})),
\]
$\rho$ the homomorphism (4.4.3.2) and $\alpha$ the homomorphism (4.2.2.1).
To show that when $\sh{L}$ is locally free, this homomorphism is bijective, it suffices, since the questions is local, to consider the case where $\sh{L}=\sh{O}_X^n$;
in addition, $f_*$ and $f^*$ commute with finite direct sums, so we can assume $n=1$, and in this case the proposition follows immediately from the definitions and from the relation $f^*(\sh{O}_Y)=\sh{O}_X$.
\end{env}

\subsection{Sheaves on a locally ringed space}
\label{subsection:0.5.5}

\begin{env}[5.5.1]
\label{0.5.5.1}
We say that a ringed space $(X,\sh{O}_X)$ is a \emph{locally ringed space} if for each $x\in X$, $\sh{O}_x$ is a local ring;
these ringed spaces will be by far the most frequent ringed spaces that we will consider in this work.
We then denote by $\mathfrak{m}_x$ the \emph{maximal ideal} of $\sh{O}_x$, by $\kres(x)$ the \emph{residue field $\sh{O}_x/\mathfrak{m}_x$};
for each $\sh{O}_X$-module $\sh{F}$, each open set $U$ of $X$, each point $x\in U$, and each section $f\in\Gamma(U,\sh{F})$, we denote by $f(x)$ the \emph{class} of the germ $f_x\in\sh{F}_x$ mod.~$\mathfrak{m}_x\sh{F}_x$, and we say that this is the \emph{value} of $f$ at the point $x$.
The relation $f(x)=0$ then means that $f_x\in\mathfrak{m}_x\sh{F}_x$; when this is so, we say (by abuse of language) that \emph{$f$ is zero at $x$}.
We will take care not to confuse this relation with $f_x=0$.
\end{env}

\begin{env}[5.5.2]
\label{0.5.5.2}
Let $X$ be a locally ringed space, $\sh{L}$ an invertible $\sh{O}_X$-module, and $f$ a section of $\sh{L}$ over $X$.
There is then an \emph{equivalence} between the three following properties for a point $x\in X$:
\begin{enumerate}
  \item[(a)] \emph{$f_x$ is a generator of $\sh{L}_x$};
  \item[(b)] \emph{$f_x\not\in\mathfrak{m}_x\sh{L}_x$} (in other words, $f(x)\neq 0$);
  \item[(c)] \emph{there exists a section $g$ of $\sh{L}^{-1}$ over an open neighborhood $V$ of $x$ such that the canonical image of $f\otimes g$ in $\Gamma(V,\sh{O}_X)$ \sref{0.5.4.3} is the unit section}.
\end{enumerate}

Indeed, since the questions is local, we can reduce to the case where $\sh{L}=\sh{O}_X$;
the equivalence of (a) and (b) are then evident, and it is clear that (c) implies (b).
Conversely, if $f_x\not\in\mathfrak{m}_x$, then $f_x$ is invertible in $\sh{O}_x$, say $f_x g_x=1_x$.
By definition of germs of sections, this means that there exists a neighborhood $V$ of $x$ and a section $g$ of $\sh{O}_X$ over $V$ such that $fg=1$ in $V$, hence (c).

It follows immediately from the condition (c) that the set $X_f$ of $x$ satisfying the equivalent conditions (a), (b), (c) is \emph{open} in $X$;
following the terminology introduced in \sref{0.5.5.1}, this is the set of the $x$ for which \emph{$f$ does not vanish}.
\end{env}

\begin{env}[5.5.3]
\label{0.5.5.3}
Under the hypotheses of \sref{0.5.5.2}, let $\sh{L}'$ be a second invertible $\sh{O}_X$-module;
then, if $f\in\Gamma(X,\sh{L})$, $g\in\Gamma(X,\sh{L}')$, we have
\[
  X_f\cap X_g=X_{f\otimes g}.
\]

We can in fact reduce immediately to the case where $\sh{L}=\sh{L}'=\sh{O}_X$ (since the questions is local);
as $f\otimes g$ then canonically identifies with the product $fg$, the proposition is evident.
\end{env}

\oldpage[0\textsubscript{I}]{54}
\begin{env}[5.5.4]
\label{0.5.5.4}
Let $\sh{F}$ be a locally free $\sh{O}_X$ of rank $n$;
it is immediate that $\wedge^p\sh{F}$ is a locally free $\sh{O}_X$-module of rank $\binom{n}{p}$ if $p\leq n$ and $0$ if $p>n$, since the question is local and we can reduce to the case where $\sh{F}=\sh{O}_X^n$;
in addition, for each $x\in X$, $(\wedge^p\sh{F})_x/\mathfrak{m}_x(\wedge^p\sh{F})_x$ is a vector space of dimension $\binom{n}{p}$ over $\kres(x)$, which canonically identifies with $\wedge^p(\sh{F}_x/\mathfrak{m}_x\sh{F}_x)$.
Let $s_1,\dots,s_p$ be the sections of $\sh{F}$ over an open subset $U$ of $X$, and let $s=s_1\wedge\cdots\wedge s_p$, which is a section of $\wedge^p\sh{F}$ over $U$ \sref{0.4.1.5};
we have $s(x)=s_1(x)\wedge\cdots\wedge s_p(x)$, and as a result, we say that the $s_1(x),\dots,s_p(x)$ are \emph{linearly dependent} means $s(x)=0$.
We conclude that the \emph{set of the $x\in X$ such that $s_1(x),\dots,s_p(x)$ are linearly independent is open in $X$}: it suffices in fact, by reducing to the case where $\sh{F}=\sh{O}_X^n$, to apply \sref{0.5.5.2} to the section image of $s$ under one of the projections of $\wedge^p\sh{F}=\sh{O}_X^{\binom{n}{p}}$ to the $\binom{n}{p}$ factors.

In particular, if $s_1,\dots,s_n$ are $n$ sections of $\sh{F}$ over $U$ such that $s_1(x),\dots,s_n(x)$ are linearly independent for each point $x\in U$, then the homomorphism $u:\sh{O}_X^n|U\to\sh{F}|U$ defined by the $s_i$ \sref{0.5.1.1} is an \emph{isomorphism}:
indeed, we can restrict to the case where $\sh{F}=\sh{O}_X^n$ and where we canonically identify $\wedge^n\sh{F}$ and $\sh{O}_X$;
$s=s_1\wedge\cdots\wedge s_n$ is then an \emph{invertible} section of $\sh{O}_X$ over $U$, and we define an inverse homomorphism for $u$ by means of the Cramer formulas.
\end{env}

\begin{env}[5.5.5]
\label{0.5.5.5}
Let $\sh{E}$ and $\sh{F}$ be two locally free $\sh{O}_X$-modules (of finite rank), and let $u:\sh{E}\to\sh{F}$ be a homomorphism.
For there to exist a neighborhood $U$ of $x\in X$ such that $u|U$ is \emph{injective} and that $\sh{F}|U$ is \emph{the direct sum of the $u(\sh{E})|U$ and of a locally free $(\sh{O}_X|U)$-submodule $\sh{G}$}, it is necessary and sufficient that $u_x:\sh{E}_x\to\sh{F}_x$ gives, by passing to quotients, an \emph{injective} homomorphism of vector spaces $\sh{E}_x/\mathfrak{m}_x\sh{E}_x\to\sh{F}_x/\mathfrak{m}_x\sh{F}_x$.
The condition is indeed \emph{necessary}, since $\sh{F}_x$ is then the direct sum of the free $\sh{O}_x$-modules $u_x(\sh{E}_x)$ and $\sh{G}_x$, so $\sh{F}_x/\mathfrak{m}_x\sh{F}_x$ is the direct sum of $u_x(\sh{E}_x)/\mathfrak{m}_x u_x(\sh{E}_x)$ and of $\sh{G}_x/\mathfrak{m}_x\sh{G}_x$.
The condition is \emph{sufficient}, since we can reduce to the case where $\sh{E}=\sh{O}_X^m$;
let $s_1,\dots,s_m$ be the images under $u$ of the sections $e_i$ of $\sh{O}_X^m$ such that $(e_i)_y$ is equal to the $i$-th element of the canonical basis of $\sh{O}_y^m$ for each $y\in Y$ (\emph{canonical sections} of $\sh{O}_X^m$);
by hypothesis, the $s_1(x),\dots,s_m(x)$ are linearly independent, so if $\sh{F}$ is of rank $n$, then there exist $n-m$ sections $s_{m+1},\dots,s_n$ of $\sh{F}$ over a neighborhood $V$ of $x$ such that the $s_i(x)$ ($1\leq i\leq n$) form a basis for $\sh{F}_x/\mathfrak{m}_x\sh{F}_x$.
There then exists \sref{0.5.5.4} a neighborhood $U\subset V$ of $x$ such that the $s_i(y)$ ($1\leq i\leq n$) form a basis for $\sh{F}_y/\mathfrak{m}_y\sh{F}_y$ for each $y\in V$, and we conclude \sref{0.5.5.4} that there is an isomorphism from $\sh{F}|U$ to $\sh{O}_X^n|U$, sending the $s_i|U$ ($1\leq i\leq m$) to the $e_i|U$, which finishes the proof.
\end{env}

